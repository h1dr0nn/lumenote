version: "3.8"

services:
  sync-server:
    build:
      context: ./server
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    volumes:
      - ./data:/app/data
    environment:
      - DATABASE_URL=sqlite:/app/data/sync.db?mode=rwc
      - RUST_LOG=server=info,tower_http=debug
      # Optional: Set custom sync key (default: ln_opt_password)
      # - DEFAULT_SYNC_KEY=ln_opt_your_custom_key_here
    restart: unless-stopped
